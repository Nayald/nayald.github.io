#app-footer,#app-header{background-color:#fff;padding:5px;text-align:center}#app-footer,#app-main,.sidebar,.sort-buttons,body{display:flex}#app-footer,#app-header,.node-label,.sort-button,td,th{text-align:center}.digit-badge,.node-label,th{font-weight:700}*{margin:0;padding:0;box-sizing:border-box}body,html{height:100%}body{max-width:2560px;margin:0 auto;font-family:Arial,sans-serif;background:#f5f5f5;flex-direction:column}#app-header{border-bottom:1px solid #ddd}#app-main{min-height:0;flex:1 1 auto;flex-direction:row;overflow-x:auto;overflow-y:hidden}#app-footer{border-top:1px solid #ddd;flex-wrap:wrap;justify-content:space-between;align-items:center}.contact,.contact a{display:flex;align-items:center;gap:5px}.sidebar{flex:1 1 640px;min-width:320px;background:#fff;border-right:2px solid #ddd;box-shadow:2px 0 10px rgba(0,0,0,.1);flex-direction:column}.sidebar-header{padding:15px 20px;border-bottom:1px solid #eee;background:#fff;position:sticky;top:0;z-index:10}.sort-button,th{background:#f0f0f0}.sidebar-content{flex:1;overflow-y:auto;padding:15px 20px}.search-box{width:100%;padding:10px;border:1px solid #ddd;border-radius:5px;font-size:14px}.sort-buttons{gap:5px;margin-top:10px}.sort-button{flex:1;padding:6px 8px;border:1px solid #ddd;border-radius:4px;cursor:pointer;font-size:12px;transition:.2s;color:#000}.node-label,.uma-name{font-size:16px;text-overflow:ellipsis}.sort-button:hover{background:#e0e0e0}.sort-button.active{background:#87d108;color:#fff;border-color:#87d108}.uma-list{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:5px}.uma-item{position:relative;padding:8px 10px;background:#f9f9f9;border:1px solid #ddd;border-radius:5px;cursor:grab;transition:.2s;user-select:none;display:flex;align-items:center;gap:10px}.exclude-button,.tree-node{border-radius:50%;transition:.2s}.uma-item:active{cursor:grabbing}.stored-uma:hover>*,.uma-item:hover{background:#e8f5e9;border-color:#87d108}.uma-item.dragging{opacity:.5}.uma-item>img{width:64px;height:64px;border-radius:8px;flex-shrink:0;display:flex;align-items:center;justify-content:center}.uma-name{flex:1;overflow:hidden}.uma-extra{flex-shrink:0}.digit-badge,.exclude-button{color:#fff;align-items:center;display:flex}.exclude-button{position:absolute;top:4px;left:4px;width:24px;height:24px;background:#4caf50;line-height:1;cursor:pointer;justify-content:center;opacity:0;z-index:10}.uma-item:hover .exclude-button{opacity:1}.exclude-button:hover{background:#388e3c;transform:scale(1.1)}.uma-item.excluded .exclude-button{opacity:1;background:#f44336}.uma-item.excluded .exclude-button:hover{background:#d32f2f}.main-content{flex:1 1 1280px;min-width:960px;padding:20px;overflow-y:auto}.container{max-width:100%}.tree-container{position:relative;width:100%;height:500px;margin-bottom:30px;user-select:none}.controls,.modal-header,.year-tabs,table{margin-bottom:20px}.digit-badge.center,.tree-node-wrapper{position:absolute;transform:translate(-50%,-50%)}.tree-node{position:relative;width:150px;aspect-ratio:1;outline:#333 solid 4px;background:#fff;cursor:pointer;overflow:hidden}.tree-node.selected{outline-color:#87d108;outline-width:6px;background:#e3f2fd;box-shadow:0 0 0 12px #4caf5055}.tree-node.hover{outline-color:#87d108;transform:scale(1.1)}.tree-node>*{pointer-events:none}.tree-node img{position:absolute;width:100%;aspect-ratio:1}.digit-badge:empty,.modal-grid>.slot-wrapper>.slot>img[src]+.plus-icon,.tree-node img:not([src]),.tree-node img[src=""]{display:none}.node-label{position:absolute;top:75%;left:50%;transform:translateX(-50%);max-width:70%;overflow:hidden;text-shadow:-1px -1px 0 #000,0 -1px 0 #000,1px -1px 0 #000,1px 0 0 #000,1px 1px 0 #000,0 1px 0 #000,-1px 1px 0 #000,-1px 0 0 #000;color:#fff;z-index:2;white-space:nowrap}.digit-badge{font-size:24px;width:50px;height:25px;justify-content:center;border-radius:25px;text-shadow:0 2px 4px rgba(0,0,0,.3);font-family:consolas,monospace}.digit-badge.internal{background:linear-gradient(145deg,#616161,#424242);left:50%;top:100%}.digit-badge.lineage{background:linear-gradient(145deg,#f44336,#d32f2f)}.digit-badge.compatibility{background:linear-gradient(145deg,#2196f3,#1976d2)}.digit-badge.race{background:linear-gradient(145deg,#87d108,#388e3c)}.digit-badge.above{position:absolute;transform:translate(-50%,-100%)}.digit-badge.below{position:absolute;transform:translateX(-50%)}.tree-line{position:absolute;background:#333;transform-origin:top left}.tree-line.horizontal{outline:solid 2px;transform:translateY(-50%)}.tree-line.vertical{outline:solid 2px;transform:translateX(-50%)}.tree-line.dashed{outline:dashed 2px}table{width:100%;border-collapse:collapse;margin-top:20px}td,th{border:1px solid #333;padding:12px}.controls{display:flex;gap:10px;align-items:center;flex-wrap:wrap}.mode-info{margin-left:auto;padding:8px 12px;background:#e3f2fd;border-radius:5px;font-size:14px;color:#1976d2}.action-button,.action-button:hover{background:#87d108}.action-button{padding:10px 20px;color:#fff;border:none;border-radius:5px;cursor:pointer;font-size:14px}.calandar-selector,.clear-selector,.spark-selector{position:absolute;width:48px;display:flex;font-size:24px;font-weight:700;z-index:5;pointer-events:auto;transform:translate(-50%,-50%);transition:.2s;cursor:pointer;aspect-ratio:1}.calandar-selector,.spark-selector{background:#87d108;border:2px solid #fff;border-radius:50%;align-items:center;justify-content:center}.clear-selector{background:#f44336;color:#fff;border:2px solid #fff;border-radius:50%;align-items:center;justify-content:center}.calandar-selector:hover,.clear-selector:hover,.spark-selector:hover{transform:translate(-50%,-50%) scale(1.1)}.modal-overlay{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.6);z-index:1000;justify-content:center;align-items:center}.modal-close,.modal-overlay.active,.year-tabs{display:flex}.modal-content{background:linear-gradient(to bottom,#f5f5f5,#e8e8e8);padding:25px;border-radius:12px;max-width:900px;width:100%;max-height:90dvh;overflow-y:auto;box-shadow:0 10px 40px rgba(0,0,0,.3);position:relative;min-height:500px}.modal-header{display:flex;justify-content:space-between;align-items:center}.modal-close{background:#f44336;color:#fff;border:none;width:32px;height:32px;border-radius:50%;cursor:pointer;font-size:20px;align-items:center;justify-content:center;transition:.2s}.modal-grid>.slot-wrapper>.label,.year-tab{text-align:center;font-weight:600;color:#8b4513}.modal-close:hover{background:#d32f2f;transform:scale(1.1)}.year-tabs{background:#fff;border-radius:50px;padding:4px;box-shadow:0 2px 10px rgba(0,0,0,.1)}.year-tab{flex:1;padding:10px 16px;border-radius:50px;font-size:16px;cursor:pointer;transition:.3s;border:none;background:0 0}.year-tab.active{background:#87d108;color:#fff;box-shadow:0 2px 8px rgba(124,184,0,.3)}.modal-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:12px}.modal-grid>.slot-wrapper{display:flex;flex-direction:column}.modal-grid>.slot-wrapper>.slot{background:#fff;border-radius:10px;aspect-ratio:2;display:flex;flex-direction:column;align-items:center;justify-content:center;position:relative;cursor:pointer;transition:.2s;border:2px solid #d0d0d0;overflow:hidden}.spark,.stored-uma{align-items:center}.modal-grid>.slot-wrapper>.slot:hover{border-color:#87d108;transform:translateY(-2px);box-shadow:0 4px 8px rgba(0,0,0,.1)}.modal-grid>.slot-wrapper>.slot>img{width:100%}.modal-grid>.slot-wrapper>.label{margin-top:6px;font-size:14px}.plus-icon{font-size:36px;color:#87d108;font-weight:300;line-height:1}#spark-grid{display:grid;grid-template-columns:1fr 1fr;gap:10px}.spark{display:flex;gap:5px;padding:5px;background:#f9fafb;border:1px solid #ddd;border-radius:5px}.spark>select,input{flex:1;padding:5px;border:1px solid #d1d5db;border-radius:5px;font-size:1rem;outline:0}select:focus{border-color:#3b82f6}.spark>.name{flex:1;padding:5px}.stars{display:flex;gap:2px}.star{cursor:pointer;transition:transform .2s;background:0 0;border:none;padding:0;color:#9ca3af;font-size:28px;line-height:1}.remove-btn,.suggestion-item{transition:background-color .2s;cursor:pointer}.star.filled{color:#fbbf24}.search-container{position:relative;margin:10px 0}.search-input{width:100%;padding:.5rem 1rem}.suggestions{position:absolute;z-index:10;width:100%;margin-top:5px;background:#fff;border:1px solid #d1d5db;border-radius:5px;box-shadow:0 10px 15px -3px rgba(0,0,0,.1);max-height:250px;overflow-y:auto;display:none}.suggestions.show{display:block}.suggestion-item{width:100%;text-align:left;padding:5px}.suggestion-item:hover{background:#eff6ff}.suggestion-item.selected{border:1px solid #ddd;border-radius:5px}.additional-section{border-top:1px solid #e5e7eb;padding-top:1rem;margin-top:1rem;min-height:400px}.remove-btn{padding:.5rem;color:#ef4444;background:0 0;border:none;border-radius:.5rem;font-size:20px;line-height:1}.remove-btn:hover{background:#fee2e2}.stored-uma{position:relative;width:100%;transition:.2s;margin:20px 0;cursor:pointer}.stored-uma>.body,.stored-uma>.header{display:flex;align-items:center;padding:5px;background:#f9fafb;border-radius:5px;border:1px solid #ddd}.stored-uma>.body img{width:128px;aspect-ratio:1}.stored-uma>.header>.name{flex:1;padding:5px;font-size:24px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.stored-uma .sparks{display:flex;align-items:flex-start;flex-wrap:wrap;flex:1;padding:5px;gap:5px}.stored-uma .spark>span{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:100%}